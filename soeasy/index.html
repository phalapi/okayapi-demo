<!DOCTYPE html>
<html lang="zh-CN"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/img/favicon.png">

    <title>小白接口 - 在线示例</title>

    <!-- Bootstrap core CSS -->
    <link href="../css/bootstrap.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="../css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="../css/offcanvas.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <script src="../js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <nav class="navbar navbar-fixed-top navbar-inverse">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">小白接口在线示例</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
          </ul>
        </div><!-- /.nav-collapse -->
      </div><!-- /.container -->
    </nav><!-- /.navbar -->

    <div class="container">

      <div class="row row-offcanvas row-offcanvas-right">

        <div class="col-xs-12 col-sm-9">
          <p class="pull-right visible-xs">
            <button type="button" class="btn btn-primary btn-xs" data-toggle="offcanvas">Toggle nav</button>
          </p>
          <div class="jumbotron">
            <h1>在线示例大全</h1>
            <p>本页面的示例源代码，可在码云下载。为了更好地体验示例效果，推荐使用最新浏览器进行访问。</p>
          </div>

          <!-- 在线留言（开始） -->
          <div class="row" id="appComments" >
            <div class="col-xs-12 col-lg-12">
              <h2>在线留言</h2>

              <p>最近留言，显示最近10条留言。</p>
              <table class="table table-hover">
              <thead>
                <tr>
                  <th>时间</th>
                  <th>留言内容</th>
                  <th>昵称</th>
                </tr>
              </thead>
              <tbody>
                <tr v-for="comment_item in comment_list">
                  <td><font color="gray">{{ comment_item.add_time }}</font></td>
                  <td>{{ comment_item.data.comment_content }}</td>
                  <td>@{{ comment_item.data.comment_username }}</td>
                </tr>
              </tbody>
              </table>
              
              <div class="alert alert-success" role="alert">
                  <strong>划重点！</strong> 一对多关系的数据，可以使用集合数据。如果集合数据与用户有关，则使用<a href="http://www.okayapi.com/docs/#/v2.0/user_set" target="_blank">用户集合数据（App.User_Set.*）</a>；如果与用户无关，则可使用<a href="http://www.okayapi.com/docs/#/v2.0/main_set" target="_blank" >应用集合数据（App.Main_Set.*）</a>。
              </div>
            </div>


            <div class="col-xs-12 col-lg-12" data-example-id="basic-forms">
            <p>留言评论：</p>
              <form class="form-horizontal">
                <div class="form-group">
                  <label for="input_comment_user" class="col-sm-2 control-label">您的昵称</label>
                  <div class="col-sm-10">
                    <input type="text" class="form-control" id="input_comment_user" v-model="new_comment_username" placeholder="">
                  </div>
                </div>
                <div class="form-group">
                  <label for="input_comment_content" class="col-sm-2 control-label">留言内容</label>
                  <div class="col-sm-10">
                    <textarea class="form-control" rows="3" v-model="new_comment_content" id="input_comment_content" placeholder="亲，请文明留言哦~"></textarea>
                  </div>
                </div>
                <div class="form-group">
                  <div class="col-sm-offset-2 col-sm-10">
                    <a v-on:click="addComment" type="submit" class="btn btn-success" href="javascrpit:void(0)">发表留言</a>
                    <span>{{ tips }}</span>
                  </div>
                </div>
              </form>
              
              <div class="alert alert-success" role="alert">
                  <strong>划重点！</strong> 集合数据内的元素，可以放置任意常用类型的数据。客户端应用可以根据自己的业务需要，设计字段和结构，并通过<a href="http://admin.okayapi.com/?r=Data/MainSetList" target="_blank">小白后台</a>进行在线可视化管理。
              </div>
            </div>


          </div>
          <!-- 在线留言（结束） -->

          <div class="row">
            <div class="col-xs-6 col-lg-4">
              <h2>Heading</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce
 dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut 
fermentum massa justo sit amet risus. Etiam porta sem malesuada magna 
mollis euismod. Donec sed odio dui. </p>
              <p><a class="btn btn-default" href="#" role="button">View details »</a></p>
            </div><!--/.col-xs-6.col-lg-4-->
            <div class="col-xs-6 col-lg-4">
              <h2>Heading</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce
 dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut 
fermentum massa justo sit amet risus. Etiam porta sem malesuada magna 
mollis euismod. Donec sed odio dui. </p>
              <p><a class="btn btn-default" href="#" role="button">View details »</a></p>
            </div><!--/.col-xs-6.col-lg-4-->
            <div class="col-xs-6 col-lg-4">
              <h2>Heading</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce
 dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut 
fermentum massa justo sit amet risus. Etiam porta sem malesuada magna 
mollis euismod. Donec sed odio dui. </p>
              <p><a class="btn btn-default" href="#" role="button">View details »</a></p>
            </div><!--/.col-xs-6.col-lg-4-->
            <div class="col-xs-6 col-lg-4">
              <h2>Heading</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce
 dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut 
fermentum massa justo sit amet risus. Etiam porta sem malesuada magna 
mollis euismod. Donec sed odio dui. </p>
              <p><a class="btn btn-default" href="#" role="button">View details »</a></p>
            </div><!--/.col-xs-6.col-lg-4-->
            <div class="col-xs-6 col-lg-4">
              <h2>Heading</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce
 dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut 
fermentum massa justo sit amet risus. Etiam porta sem malesuada magna 
mollis euismod. Donec sed odio dui. </p>
              <p><a class="btn btn-default" href="#" role="button">View details »</a></p>
            </div><!--/.col-xs-6.col-lg-4-->
            <div class="col-xs-6 col-lg-4">
              <h2>Heading</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce
 dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut 
fermentum massa justo sit amet risus. Etiam porta sem malesuada magna 
mollis euismod. Donec sed odio dui. </p>
              <p><a class="btn btn-default" href="#" role="button">View details »</a></p>
            </div><!--/.col-xs-6.col-lg-4-->
          </div><!--/row-->
        </div><!--/.col-xs-12.col-sm-9-->

        <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar">
          <div class="list-group">
            <a href="#" class="list-group-item active">Link</a>
            <a href="#" class="list-group-item">Link</a>
            <a href="#" class="list-group-item">Link</a>
            <a href="#" class="list-group-item">Link</a>
            <a href="#" class="list-group-item">Link</a>
            <a href="#" class="list-group-item">Link</a>
            <a href="#" class="list-group-item">Link</a>
            <a href="#" class="list-group-item">Link</a>
            <a href="#" class="list-group-item">Link</a>
            <a href="#" class="list-group-item">Link</a>
          </div>
        </div><!--/.sidebar-offcanvas-->
      </div><!--/row-->

      <hr>

      <footer>
        <p>© 2017-2018 小白接口 OkayApi.COM All Rights Reserved.</p>
      </footer>

    </div><!--/.container-->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../js/jquery.js"></script>
    <script src="../js/bootstrap.js"></script>
    <script src="../js/ie10-viewport-bug-workaround.js"></script>
    <script src="../js/offcanvas.js"></script>
    <script src="../js/vue.js"></script>
  


          <script type="text/javascript">
var appComments = new Vue({
    el: '#appComments',
    data: {
        comment_list: [],
        new_comment_username: '',
        new_comment_content: '',
        tips: ''
    },

    methods: {
        init: function() {

            this.loadComments(null)
        },
        loadComments: function (event) {
            let _self = this
            let params = { 
                    s: 'App.Main_Set.GetList', 
                    key: 'demo_comments', 
                    page: 1, 
                    perpage: 10,
                    sort: '2'
                }

            $.ajax({
              url: '/okayapi.php',
              dataType: 'json',
              data: params
            }).done(function (rs) {
                if (rs.data && rs.data.err_code == 0) {
                    _self.comment_list = rs.data.items
                } else {
                    console.log(rs.data.err_msg)
                }
            });
        },

        addComment: function (event) {
            if (this.new_comment_username.length == 0) {
                this.tips = '亲，留言昵称不能为空~';
                return false;
            }
            if (this.new_comment_content.length == 0) {
                this.tips = '亲，留言内容不能为空~';
                return false;
            }

            let _self = this
            let setData = {
                    comment_username: _self.new_comment_username,
                    comment_content: _self.new_comment_content
                }
            let params = { 
                    s: 'App.Main_Set.Add', 
                    key: 'demo_comments', 
                    data: JSON.stringify(setData)
                }

            $.ajax({
              url: '/okayapi.php',
              dataType: 'json',
              data: params,
            }).done(function (rs) {
                if (rs.data && rs.data.err_code == 0) {
                    _self.tips = '留言成功！';

                    // 重置内容
                    _self.new_comment_content = ''

                    _self.loadComments(null)
                } else {
                    console.log(rs.data.err_msg)       
                }
            });
        }
    }
})

appComments.init();
          </script>

</body></html>
